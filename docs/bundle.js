!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=13)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=null,i=null,a=null;function s(t){console.error(t)}e.default=function(){return new Promise(function(t,e){(function(){var t=["brand_dictionary","group_dictionary"].map(function(t){return"assets/data/"+t+".csv"});return new Promise(function(e,n){var r;(r=d3).loadData.apply(r,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t).concat([function(t,r){t?n(t):e(r)}]))})})().then(function(t){!function(t){i=t[0],t[1],a=d3.map(i,function(t){return t.brand_short})}(t)}).then(function(e){t(new Promise(function(t,e){d3.loadData("assets/data/shades.csv",function(n,s){var c;n&&e(n),c=s[0],o=c.map(function(t){return r({},t,{brand_short:t.brand,brand:a.get(t.brand).brand,product_short:t.product,product:(e=t.brand,n=t.product,o=i.filter(function(t){return t.brand_short==e}),d3.map(o,function(t){return t.foundation_short}).get(n).foundation),hex:t.hex,H:+t.H,S:+t.S,V:+t.V,L:+t.L,group:t.group,lightnessGroup:function(t){switch(!0){case t>=90:return 9;case t>=80:return 8;case t>=70:return 7;case t>=60:return 6;case t>=50:return 5;case t>=40:return 4;case t>=30:return 3;case t>=20:return 2;case t>=10:return 1;default:return 0}}(+t.L)});var e,n,o}),t(o)})}))}).catch(s)})}},function(t,e){!function(t,e){"use strict";if("IntersectionObserver"in t&&"IntersectionObserverEntry"in t&&"intersectionRatio"in t.IntersectionObserverEntry.prototype)"isIntersecting"in t.IntersectionObserverEntry.prototype||Object.defineProperty(t.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var n=[];o.prototype.THROTTLE_TIMEOUT=100,o.prototype.POLL_INTERVAL=null,o.prototype.USE_MUTATION_OBSERVER=!0,o.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},o.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},o.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},o.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},o.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter(function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]})},o.prototype._parseRootMargin=function(t){var e=(t||"0px").split(/\s+/).map(function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}});return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e},o.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(i(t,"resize",this._checkForIntersections,!0),i(e,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in t&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},o.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,a(t,"resize",this._checkForIntersections,!0),a(e,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},o.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),n=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(o){var i=o.element,a=s(i),c=this._rootContainsTarget(i),l=o.entry,u=e&&c&&this._computeTargetAndRootIntersection(i,n),d=o.entry=new r({time:t.performance&&performance.now&&performance.now(),target:i,boundingClientRect:a,rootBounds:n,intersectionRect:u});l?e&&c?this._hasCrossedThreshold(l,d)&&this._queuedEntries.push(d):l&&l.isIntersecting&&this._queuedEntries.push(d):this._queuedEntries.push(d)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},o.prototype._computeTargetAndRootIntersection=function(n,r){if("none"!=t.getComputedStyle(n).display){for(var o,i,a,c,u,d,p,f,b=s(n),h=l(n),g=!1;!g;){var y=null,v=1==h.nodeType?t.getComputedStyle(h):{};if("none"==v.display)return;if(h==this.root||h==e?(g=!0,y=r):h!=e.body&&h!=e.documentElement&&"visible"!=v.overflow&&(y=s(h)),y&&(o=y,i=b,a=Math.max(o.top,i.top),c=Math.min(o.bottom,i.bottom),u=Math.max(o.left,i.left),f=c-a,!(b=(p=(d=Math.min(o.right,i.right))-u)>=0&&f>=0&&{top:a,bottom:c,left:u,right:d,width:p,height:f})))break;h=l(h)}return b}},o.prototype._getRootRect=function(){var t;if(this.root)t=s(this.root);else{var n=e.documentElement,r=e.body;t={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(t)},o.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map(function(e,n){return"px"==e.unit?e.value:e.value*(n%2?t.width:t.height)/100}),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},o.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,r=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==r)for(var o=0;o<this.thresholds.length;o++){var i=this.thresholds[o];if(i==n||i==r||i<n!=i<r)return!0}},o.prototype._rootIsInDom=function(){return!this.root||c(e,this.root)},o.prototype._rootContainsTarget=function(t){return c(this.root||e,t)},o.prototype._registerInstance=function(){n.indexOf(this)<0&&n.push(this)},o.prototype._unregisterInstance=function(){var t=n.indexOf(this);-1!=t&&n.splice(t,1)},t.IntersectionObserver=o,t.IntersectionObserverEntry=r}function r(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,r=this.intersectionRect,o=r.width*r.height;this.intersectionRatio=n?o/n:this.isIntersecting?1:0}function o(t,e){var n,r,o,i=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(i.root&&1!=i.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,o=null,function(){o||(o=setTimeout(function(){n(),o=null},r))}),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(i.rootMargin),this.thresholds=this._initThresholds(i.threshold),this.root=i.root||null,this.rootMargin=this._rootMarginValues.map(function(t){return t.value+t.unit}).join(" ")}function i(t,e,n,r){"function"==typeof t.addEventListener?t.addEventListener(e,n,r||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function a(t,e,n,r){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,r||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function s(t){var e;try{e=t.getBoundingClientRect()}catch(t){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function c(t,e){for(var n=e;n;){if(n==t)return!0;n=l(n)}return!1}function l(t){var e=t.parentNode;return e&&11==e.nodeType&&e.host?e.host:e}}(window,document)},function(t,e,n){t.exports=function(){"use strict";function t(t){for(var e=t.length,n=[],r=0;r<e;r+=1)n.push(t[r]);return n}function e(t){return t instanceof Element?t:"string"==typeof t?document.querySelector(t):null}function n(t){return"scrollama__debug-step--"+t.id+"-"+t.i}function r(t){return"scrollama__debug-offset--"+t.id}function o(t){var e=t.id,o=t.offsetVal,i=t.stepEl,a=i[0].getAttribute("class");i.forEach(function(t,r){return function(t){var e=n({id:t.id,i:t.i}),r=document.createElement("div");r.setAttribute("id",e+"_above"),r.setAttribute("class","scrollama__debug-step"),r.style.position="fixed",r.style.left="0",r.style.width="100%",r.style.backgroundImage="repeating-linear-gradient(45deg, green 0, green 2px, white 0, white 40px)",r.style.border="2px solid green",r.style.opacity="0.33",r.style.zIndex="9999",r.style.display="none",document.body.appendChild(r);var o=document.createElement("div");o.setAttribute("id",e+"_below"),o.setAttribute("class","scrollama__debug-step"),o.style.position="fixed",o.style.left="0",o.style.width="100%",o.style.backgroundImage="repeating-linear-gradient(135deg, orange 0, orange 2px, white 0, white 40px)",o.style.border="2px solid orange",o.style.opacity="0.33",o.style.zIndex="9999",o.style.display="none",document.body.appendChild(o)}({id:e,i:r})}),function(t){var e=t.id,n=t.offsetVal,o=t.stepClass,i=document.createElement("div");i.setAttribute("id",r({id:e})),i.setAttribute("class","scrollama__debug-offset"),i.style.position="fixed",i.style.left="0",i.style.width="100%",i.style.height="0px",i.style.borderTop="2px dashed black",i.style.zIndex="9999";var a=document.createElement("p");a.innerText='".'+o+'" trigger: '+n,a.style.fontSize="12px",a.style.fontFamily="monospace",a.style.color="black",a.style.margin="0",a.style.padding="6px",i.appendChild(a),document.body.appendChild(i)}({id:e,offsetVal:o,stepClass:a})}function i(t){var e=t.id,o=t.stepOffsetHeight,i=t.offsetMargin;t.offsetVal,o.forEach(function(t,r){return function(t){var e=t.h,r=t.offsetMargin,o=n({id:t.id,i:t.i}),i=document.querySelector("#"+o+"_above");i.style.height=e+"px",i.style.top=r-e+"px";var a=document.querySelector("#"+o+"_below");a.style.height=e+"px",a.style.top=r+"px"}({id:e,h:t,i:r,offsetMargin:i})}),function(t){var e=t.offsetMargin,n=r({id:t.id});document.querySelector("#"+n).style.top=e+"px"}({id:e,offsetMargin:i})}function a(t){var e=t.id,r=t.index,o=t.state,i=n({id:e,i:r}),a=document.querySelector("#"+i+"_above"),s=document.querySelector("#"+i+"_below"),c="enter"===o?"block":"none";a&&(a.style.display=c),s&&(s.style.display=c)}return function(){var n=1,r={},s={},c=null,l=null,u=null,d=null,p=0,f=0,b=0,h=0,g=null,y=null,v=null,m=!1,x=!1,w=!1,_=!1,I=0,k=!1,A=!1,O=null,C=null,E=-1,T=null,M=[];function R(t){var e=0;if(t.offsetParent)do{e+=t.offsetTop,t=t.offsetParent}while(t);return e<0?0:e}function G(t){return+t.getAttribute("data-scrollama-index")}function H(){window.pageYOffset>E?T="down":window.pageYOffset<E&&(T="up"),E=window.pageYOffset}function P(){var t,e;b=window.innerHeight,t=document.body,e=document.documentElement,h=Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight),v=l?l.getBoundingClientRect():null,f=p*b,g=u?u.map(function(t){return t.offsetHeight}):[],y=u?u.map(R):[],x&&m&&J(),w&&i({id:d,stepOffsetHeight:g,offsetMargin:f,offsetVal:p})}function j(t){t&&!x?(m&&J(),x=!0):t||(s.top&&s.top.disconnect(),s.bottom&&s.bottom.disconnect(),s.stepAbove&&s.stepAbove.forEach(function(t){return t.disconnect()}),s.stepBelow&&s.stepBelow.forEach(function(t){return t.disconnect()}),s.stepProgress&&s.stepProgress.forEach(function(t){return t.disconnect()}),s.viewportAbove&&s.viewportAbove.forEach(function(t){return t.disconnect()}),s.viewportBelow&&s.viewportBelow.forEach(function(t){return t.disconnect()}),x=!1)}function S(t,e){if("above"===e)for(var n=0;n<t;n++){var r=O[n];"enter"===r.state&&F(u[n]),"up"===r.direction&&(B(u[n],"down"),F(u[n]))}else if("below"===e)for(var o=O.length-1;o>t;o--){var i=O[o];"enter"===i.state&&F(u[o]),"down"===i.direction&&(B(u[o],"up"),F(u[o]))}}function B(t,e){void 0===e&&(e=!0);var n=G(t),o={element:t,index:n,direction:T};O[n].direction=T,O[n].state="enter",k&&e&&"down"===T&&S(n,"above"),k&&e&&"up"===T&&S(n,"below"),r.stepEnter&&"function"==typeof r.stepEnter&&!M[n]&&(r.stepEnter(o,O),w&&a({id:d,index:n,state:"enter"}),A&&(M[n]=!0)),_&&L(t,"down"===T?0:1)}function F(t){var e=G(t),n={element:t,index:e,direction:T};O[e].direction=T,O[e].state="exit",_&&L(t,"down"===T?1:0),r.stepExit&&"function"==typeof r.stepExit&&(r.stepExit(n,O),w&&a({id:d,index:e,state:"exit"}))}function L(t,e){var n={element:t,index:G(t),progress:e};r.stepProgress&&"function"==typeof r.stepProgress&&r.stepProgress(n)}function W(){var t={direction:T};C.direction=T,C.state="enter",r.containerEnter&&"function"==typeof r.containerEnter&&r.containerEnter(t)}function z(){var t={direction:T};C.direction=T,C.state="exit",r.containerExit&&"function"==typeof r.containerExit&&r.containerExit(t)}function V(t){H(),t.forEach(function(t){var e=t.isIntersecting,r=t.boundingClientRect,o=t.target,i=r.bottom,a=r.height,s=i-f,c=G(o),l=O[c];s>=-n&&(e&&"down"===T&&"enter"!==l.state?B(o,T):e||"up"!==T||"enter"!==l.state?!e&&s>=a&&"down"===T&&"enter"===l.state&&F(o):F(o))})}function q(t){H(),t.forEach(function(t){var e=t.isIntersecting,r=t.boundingClientRect,o=t.target,i=r.bottom,a=r.height,s=i-f,c=G(o),l=O[c];s>=-n&&s<a&&e&&"up"===T&&"enter"!==l.state?B(o,T):s<=n&&!e&&"down"===T&&"enter"===l.state&&F(o)})}function N(t){H(),t.forEach(function(t){var e=t.isIntersecting,n=t.target,r=G(n),o=O[r];e&&"down"===T&&"enter"!==o.state&&"down"!==o.direction&&(B(n,"down"),F(n))})}function U(t){H(),t.forEach(function(t){var e=t.isIntersecting,n=t.target,r=G(n),o=O[r];e&&"up"===T&&"enter"!==o.state&&"up"!==o.direction&&(B(n,"up"),F(n))})}function D(t){H(),t.forEach(function(t){var e=t.isIntersecting,r=t.intersectionRatio,o=t.boundingClientRect,i=t.target,a=o.bottom;e&&a-f>=-n&&L(i,+r.toFixed(3))})}function $(t){H();var e=t[0],r=e.isIntersecting,o=e.boundingClientRect;(o.top,o.bottom)>-n&&(r?W():"enter"===C.state&&z())}function Y(t){H();var e=t[0],r=e.isIntersecting;e.boundingClientRect.top<n&&(r?W():"enter"===C.state&&z())}function J(){s.viewportAbove&&s.viewportAbove.forEach(function(t){return t.disconnect()}),s.viewportAbove=u.map(function(t,e){var n=y[e],r=-(b-f+g[e]),o=new IntersectionObserver(N,{root:null,rootMargin:n+"px 0px "+r+"px 0px",threshold:0});return o.observe(t),o}),s.viewportBelow&&s.viewportBelow.forEach(function(t){return t.disconnect()}),s.viewportBelow=u.map(function(t,e){var n=-(f+g[e]),r=h-y[e]-g[e]-f,o=new IntersectionObserver(U,{root:null,rootMargin:n+"px 0px "+r+"px 0px",threshold:0});return o.observe(t),o}),s.stepAbove&&s.stepAbove.forEach(function(t){return t.disconnect()}),s.stepAbove=u.map(function(t,e){var n=g[e],r=new IntersectionObserver(V,{root:null,rootMargin:n+"px 0px "+(-b+f)+"px 0px",threshold:0});return r.observe(t),r}),s.stepBelow&&s.stepBelow.forEach(function(t){return t.disconnect()}),s.stepBelow=u.map(function(t,e){var n=-f,r=h-b+g[e]+f,o=new IntersectionObserver(q,{root:null,rootMargin:n+"px 0px "+r+"px 0px",threshold:0});return o.observe(t),o}),_&&(s.stepProgress&&s.stepProgress.forEach(function(t){return t.disconnect()}),s.stepProgress=u.map(function(t,e){var n=g[e]-f+"px 0px "+(-b+f)+"px 0px",r=function(t){for(var e=Math.ceil(t/I),n=[],r=1/e,o=0;o<e;o++)n.push(o*r);return n}(g[e]),o=new IntersectionObserver(D,{root:null,rootMargin:n,threshold:r});return o.observe(t),o})),c&&l&&(function(){s.top&&s.top.unobserve(c);var t={root:null,rootMargin:b+"px 0px -"+b+"px 0px",threshold:0};s.top=new IntersectionObserver($,t),s.top.observe(c)}(),function(){s.bottom&&s.bottom.unobserve(c);var t={root:null,rootMargin:"-"+v.height+"px 0px "+v.height+"px 0px",threshold:0};s.bottom=new IntersectionObserver(Y,t),s.bottom.observe(c)}())}var K={setup:function(n){var r=n.container,i=n.graphic,a=n.step,s=n.offset;void 0===s&&(s=.5);var f=n.progress;void 0===f&&(f=!1);var b=n.threshold;void 0===b&&(b=4);var h=n.debug;void 0===h&&(h=!1);var g=n.order;void 0===g&&(g=!0);var y,v,x,E,T,M=n.once;return void 0===M&&(M=!1),v=(y="abcdefghijklmnopqrstuv").length,x=(new Date).getTime(),d=""+[0,0,0].map(function(t){return y[Math.floor(Math.random()*v)]}).join("")+x,E=a,void 0===T&&(T=document),u="string"==typeof E?t(T.querySelectorAll(E)):E instanceof NodeList?t(E):E instanceof Array?E:[],c=r?e(r):null,l=i?e(i):null,u.length?(w=h,_=f,k=g,A=M,K.offsetTrigger(s),I=Math.max(1,+b),m=!0,w&&o({id:d,stepEl:u,offsetVal:p}),u.forEach(function(t,e){return t.setAttribute("data-scrollama-index",e)}),O=u.map(function(){return{direction:null,state:null}}),C={direction:null,state:null},P(),j(!0),K):(console.error("scrollama error: no step elements"),K)},resize:function(){return P(),K},enable:function(){return j(!0),K},disable:function(){return j(!1),K},destroy:function(){j(!1),Object.keys(r).forEach(function(t){return r[t]=null}),Object.keys(s).forEach(function(t){return s[t]=null})},offsetTrigger:function(t){return t&&(isNaN(t),1)?(p=Math.min(Math.max(0,t),1),K):p},onStepEnter:function(t){return r.stepEnter=t,K},onStepExit:function(t){return r.stepExit=t,K},onStepProgress:function(t){return r.stepProgress=t,K},onContainerEnter:function(t){return r.containerEnter=t,K},onContainerExit:function(t){return r.containerExit=t,K}};return K}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return r.android()||r.blackberry()||r.ios()||r.opera()||r.windows()}};e.default=r},function(t,e,n){"use strict";d3.selection.prototype.spark=function(t){var e=this.nodes().map(function(t){var e=d3.select(t),n=e.datum(),r={init:function(){r.resize(),r.render()},resize:function(){return e.node().offsetWidth,e.node().offsetHeight,r},render:function(){var t=d3.map([{num:0,group:"Fenty"},{num:2,group:"US Bestsellers"},{num:3,group:"BIPOC Founders"},{num:4,group:"White Founders"},{num:5,group:"Nigeria"},{num:6,group:"Japan"},{num:7,group:"India"}],function(t){return t.num}),o=[],i=d3.nest().key(function(t){return t.group}).key(function(t){return t.lightnessGroup}).entries(n).map(function(t){var e=t.values;o.push(e);var n=d3.range(0,10).map(function(t){var n=t.toString();return e.find(function(t){return t.key===n})||{key:n,values:[]}});return{key:t.key,values:n}}),a=e.selectAll(".bin-group").data(i).enter().append("div").attr("class",function(t,e){return"bin-group bin-group-"+e});a.selectAll(".bin-brandTGroup").data(function(t){return[t]}).enter().append("div").attr("class","bin-brandTGroup").append("text").text(function(e){return t.get(e.key).group}).attr("class","bin-brandTitle"),a.append("div").attr("class","category-group").selectAll(".bin-category").data(function(t){return t.values}).enter().append("div").attr("class",function(t,e){return"bin-category bin-category-"+e}).style("height",function(t,e){return 5*t.values.length+"px"}).selectAll(".bin-swatchGroup").data(function(t){return[t]}).enter().append("div").attr("class","bin-swatchGroup").selectAll(".bin-swatch").data(function(t){return t.values}).enter().append("div").attr("class",function(t){return"bin-swatch bin-swatch-"+t.L}).style("height","3px").style("width","15px").style("background-color",function(t){return"#"+t.hex});var s=a.selectAll(".bin-labelGroup").data([0]).enter().append("div").attr("class","bin-labelGroup"),c=s.append("div").attr("class","bin-labelTGroup"),l=s.append("div").attr("class","bin-labelsOnly");return c.selectAll(".bin-labelTitle").data(["Lightness"]).enter().append("text").text(function(t){return t}).attr("class","bin-labelTitle"),l.selectAll(".bin-labelCat").data([0,1,2,3,4,5,6,7,8,9,10]).enter().append("div").attr("class",function(t){return 1&t?"bin-labelCat bin-labelCat-odd bin-labelCat-"+t:"bin-labelCat bin-labelCat-even bin-labelCat-"+t}).selectAll(".bin-label").data(function(t){return[t]}).enter().append("text").attr("class","bin-label").text(function(t){return""+10*t}).attr("alignment-baseline","middle").attr("text-anchor","middle"),r},data:function(t){return arguments.length?(n=t,e.datum(n),r.render(),r):n},toggle:function(t){var n=e.selectAll(".bin-category"),o=e.selectAll(".bin-swatch"),i=e.selectAll(".bin-labelGroup"),a=e.selectAll(".bin-count"),s=e.selectAll(".bin-vsCat"),c=e.selectAll(".bin-vs"),l=d3.selectAll(".graphic-legend"),u=e.selectAll(".bin-category-2, .bin-vsCat-3, .bin-category-3, .bin-vsCat-4, .bin-category-5, .bin-vsCat-6, .bin-category-9, .bin-vsCat-10"),d=e.selectAll(".bin-category-6, .bin-vsCat-7, .bin-category-7, .bin-vsCat-8, .bin-category-8, .bin-vsCat-9");return console.log({legend:l}),0==t&&(n.classed("spread",!1).transition().duration(500).ease(d3.easeCubicInOut).style("height",function(t,e){return 5*t.values.length+"px"}).style("margin","0px").style("border-color","rgba(0,0,0,0)"),o.transition().duration(500).ease(d3.easeCubicInOut).style("height","4px"),i.style("opacity",0),a.style("opacity",0).style("background-color","rgba(0,0,0,0)"),s.style("border-color","rgba(0,0,0,0)").transition().duration(500).ease(d3.easeCubicInOut).style("height",function(t,n){var r=e.select(".bin-brandTGroup").node().offsetHeight;return 0==n?r-2+"px":"0px"}).style("margin","0px"),c.style("opacity",0),l.style("opacity",0),u.style("background-color","rgba(0, 0, 0, 0)"),d.style("background-color","rgba(0, 0, 0, 0)")),1==t&&(n.classed("spread",!0).transition().duration(500).ease(d3.easeCubicInOut).style("height","45px").style("margin","2px 0").style("border-color","#c9c9c9"),o.transition().duration(500).ease(d3.easeCubicInOut).style("height","2px"),i.transition().duration(500).ease(d3.easeCubicInOut).style("opacity",1),a.style("opacity",0).style("background-color","rgba(0,0,0,0)"),s.transition().duration(500).ease(d3.easeCubicInOut).style("height",function(t,n){var r=e.select(".bin-brandTGroup").node().offsetHeight;return 0==n?r-2+"px":"45px"}).style("border-color","#c9c9c9").style("margin","2px 0"),c.style("opacity",0),l.style("opacity",0),u.style("background-color","rgba(0, 0, 0, 0)"),d.style("background-color","rgba(0, 0, 0, 0)")),2==t&&(n.classed("spread",!0).style("height","45px").style("margin","2px 0").style("border-color","#c9c9c9"),o.style("height","2px"),i.style("opacity",1),a.transition().duration(500).delay(function(t,e){return e>10?100*(e-10):100*e}).ease(d3.easeCubicInOut).style("opacity",1).transition().duration(500).delay(250).style("background-color",function(t,e,n){return d3.select(n[e]).classed("bin-count-winner")?"#84F0C9":"rgba(0,0,0,0)"}),s.style("height",function(t,n){var r=e.select(".bin-brandTGroup").node().offsetHeight;return 0==n?r-2+"px":"45px"}).style("border-color","#c9c9c9").style("margin","2px 0"),c.transition().duration(500).delay(function(t,e){return 100*e}).ease(d3.easeCubicInOut).style("opacity",1),l.transition().duration(500).ease(d3.easeCubicInOut).style("opacity",1),u.transition().duration(500).ease(d3.easeCubicInOut).style("background-color","rgba(0, 0, 0, 0)"),d.style("background-color","rgba(0, 0, 0, 0)")),3==t&&(n.classed("spread",!0).style("height","45px").style("margin","2px 0").style("border-color","#c9c9c9"),o.style("height","2px"),i.style("opacity",1),a.transition().duration(500).delay(function(t,e){return e>10?100*(e-10):100*e}).ease(d3.easeCubicInOut).style("opacity",1).transition().duration(500).delay(250).style("background-color",function(t,e,n){return d3.select(n[e]).classed("bin-count-winner")?"#84F0C9":"rgba(0,0,0,0)"}),s.style("height",function(t,n){var r=e.select(".bin-brandTGroup").node().offsetHeight;return 0==n?r-2+"px":"45px"}).style("border-color","#c9c9c9").style("margin","2px 0"),c.transition().duration(500).delay(function(t,e){return 100*e}).ease(d3.easeCubicInOut).style("opacity",1),l.transition().duration(500).ease(d3.easeCubicInOut).style("opacity",1),u.transition().duration(500).ease(d3.easeCubicInOut).style("background-color","rgba(132, 240, 201, .20)"),d.transition().duration(500).ease(d3.easeCubicInOut).style("background-color","rgba(0, 0, 0, 0)")),4==t&&(n.classed("spread",!0).style("height","45px").style("margin","2px 0").style("border-color","#c9c9c9"),o.style("height","2px"),i.style("opacity",1),a.transition().duration(500).delay(function(t,e){return e>10?100*(e-10):100*e}).ease(d3.easeCubicInOut).style("opacity",1).transition().duration(500).delay(250).style("background-color",function(t,e,n){return d3.select(n[e]).classed("bin-count-winner")?"#84F0C9":"rgba(0,0,0,0)"}),s.style("height",function(t,n){var r=e.select(".bin-brandTGroup").node().offsetHeight;return 0==n?r-2+"px":"45px"}).style("border-color","#c9c9c9").style("margin","2px 0"),c.transition().duration(500).delay(function(t,e){return 100*e}).ease(d3.easeCubicInOut).style("opacity",1),l.transition().duration(500).ease(d3.easeCubicInOut).style("opacity",1),u.transition().duration(500).ease(d3.easeCubicInOut).style("background-color","rgba(0, 0, 0, 0)"),d.transition().duration(500).ease(d3.easeCubicInOut).style("background-color","rgba(132, 240, 201, .20)")),r}};return r.init(),r});return e.length>1?e:e.pop()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=(r=n(0))&&r.__esModule?r:{default:r};n(4);var i=null,a=d3.selectAll(".spark");function s(){var t=d3.select(this),e=t.at("data-groups"),n=i.filter(function(t){return"us"==e?0==t.group||2==t.group||3==t.group||4==t.group:"world"==e?2==t.group||5==t.group||6==t.group||7==t.group:void 0});t.datum(n).spark()}e.default={init:function(){Promise.all([(0,o.default)()]).then(function(t){i=t[0],a.each(s)}).catch(function(t){return console.log(t)})},resize:function(){chart.resize()}}},function(t,e,n){"use strict";d3.selection.prototype.brawl=function(t){var e=this.nodes().map(function(t){var e=d3.select(t).select(".brawl"),n=e.datum(),r=d3.scaleLinear().domain([0,18]).range([0,1]),o=null,i=null,a={switch:function(t){var n=t.comp,r=t.checked;n===o&&e.selectAll(".bin-brand-pf").classed("is-visible",r)},button:function(t){var n=t.comp,r=t.action;if(n===o){var i=null;"swatch"===r&&(i="num"),"num"===r&&(i="swatch"),e.selectAll(".bin-"+i+"Group").classed("is-visible",!1),e.selectAll(".bin-"+r+"Group").classed("is-visible",!0)}}},s={init:function(){i=d3.map([{number:0,group:"Fenty"},{number:1,group:"Make Up For Ever"},{number:2,group:"us-best"},{number:3,group:"poc-marketed"},{number:4,group:"poc-marketed"},{number:5,group:"nigerian-best"},{number:6,group:"japanese-best"},{number:7,group:"indian-best"}],function(t){return t.number}),s.resize(),s.render();var t=n.filter(function(t){return 0!=t.group})[0].group;o=i.get(+t).group,e.classed("brawl-pocMarketed"),e.classed("brawl-pocMarketed")},resize:function(){return Math.floor(.6*(e.node().offsetWidth-0-0)),e.node().offsetHeight,window.innerWidth,s},render:function(){var t=d3.nest().key(function(t){return t.product_short}).rollup(function(t){return{total:t.length,group:d3.nest().key(function(t){return t.lightnessGroup}).entries(t)}}).entries(n),o=d3.nest().key(function(t){return t.product_short}).rollup(function(t){return t.length}).entries(n),i=(d3.map(o,function(t){return t.key}),d3.map(n,function(t){return t.product_short})),a=[],c=t.map(function(t){var e=t.value.total,n=t.value.group;a.push(n);var r={total:e,group:d3.range(0,10).map(function(t){var e=t.toString();return n.find(function(t){return t.key===e})||{key:e,values:[]}})};return{key:t.key,values:r}}).sort(function(t,e){return d3.descending(t.values.total,e.values.total)});e.selectAll(".all-brands").remove();var l=e.selectAll(".all-brands").data([0]).enter().append("div").attr("class","all-brands").selectAll(".bin-brand").data(c).enter().append("div").attr("class",function(t,e){return"bin-brand bin-brand-"+t.key}).attr("data-brand",function(t,e){return e}),u=l.selectAll(".bin-brandTGroup").data(function(t){return[t]}).enter().append("div").attr("class","bin-brandTGroup");u.append("text").text(function(t){return i.get(t.key).brand}).attr("class","bin-brandTitle"),u.append("text").text(function(t){return i.get(t.key).product+" • "+t.values.total}).attr("class","bin-brandProduct"),u.append("text").text(function(t){return t.values.total+" shades"}).attr("class","bin-brandTotal");var d=l.selectAll(".bin-category").data(function(t){return t.values.group}).enter().append("div").attr("class",function(t,e){return"bin-category bin-category-"+e}),p=(d.selectAll(".bin-swatchGroup").data(function(t){return[t]}).enter().append("div").attr("class","bin-swatchGroup").selectAll(".bin-swatch").data(function(t){return t.values}).enter().append("div").attr("class",function(t){return"bin-swatch bin-swatch-"+t.L}).style("background-color",function(t){return"#"+t.hex}),d.selectAll(".bin-numGroup").data(function(t){return[t]}).enter().append("div").attr("class","bin-numGroup").style("background-color",function(t){var e=t.values.length;return"rgba(252, 203, 49, "+r(e)+")"}).selectAll(".bin-num").data(function(t){return[t]}).enter().append("text").attr("class",function(t){return"bin-num bin-num-"+t.values.length}).text(function(t){return t.values.length}),e.selectAll(".bin-labelGroup").data([0]).enter().append("div").attr("class","bin-labelGroup"));return p.append("div").attr("class","bin-labelTGroup").selectAll(".bin-labelTitle").data(["Lightness","Range"]).enter().append("text").text(function(t){return t}).attr("class","bin-labelTitle"),p.selectAll(".bin-labelCat").data([0,1,2,3,4,5,6,7,8,9]).enter().append("div").attr("class","bin-labelCat").selectAll(".bin-label").data(function(t){return[t]}).enter().append("text").attr("class","bin-label").text(function(t){return 10*t+" - "+(10*t+10)}).attr("alignment-baseline","middle").attr("text-anchor","middle"),s},data:function(t){return arguments.length?(n=t,e.datum(n),s.render(),s):n},on:function(t){var e=t.dispatch,n=t.event;return e.on(n+"."+o,a[n]),s},toggle:function(t,e){var n=d3.select("."+t),r=n.select(".toggle input");return 0===e&&(r.property("checked",!1),n.selectAll(".bin-brand-pf").classed("is-visible",!1)),1===e&&(r.property("checked",!0),n.selectAll(".bin-brand-pf").classed("is-visible",!0)),s}};return s.init(),s});return e.length>1?e:e.pop()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(0));n(6);var o=i(n(2));function i(t){return t&&t.__esModule?t:{default:t}}i(n(1));var a=[],s=null,c=null,l=null,u=d3.dispatch("switch","button"),d=d3.selectAll(".comp-brawl"),p=d3.selectAll(".toggle input"),f=null,b=d3.map([{comp:"us-best",section:"scroll-us-best"},{comp:"poc-marketed",section:"scroll-poc-marketed"},{comp:"nigerian-best",section:"scroll-nigeria"},{comp:"japanese-best",section:"scroll-japan"},{comp:"indian-best",section:"scroll-india"}],function(t){return t.comp});function h(){c=d3.map([{number:0,group:"Fenty"},{number:1,group:"Make Up For Ever"},{number:2,group:"us-best"},{number:3,group:"poc-created"},{number:4,group:"poc-marketed"},{number:5,group:"nigerian-best"},{number:6,group:"japanese-best"},{number:7,group:"indian-best"}],function(t){return t.group});var t=(f=d3.select(this)).at("data-competitors"),e=c.get(t).number;e="poc-marketed"==t?s.filter(function(t){return 4==t.group||0==t.group}):function(t){return s.filter(function(e){var n=c.get(t).number;return 3==n||4==n?3==e.group||4==e.group||0==e.group:e.group==n||0==e.group})}(t),d.select(".brawl");var n=f.datum(e).brawl().on({dispatch:u,event:"switch"}).on({dispatch:u,event:"button"});l=n.toggle,function(t){if(p.on("change",g),f.selectAll(".ui-display_button").on("click",y),f.select("#shades").classed("is-active",!0),f.selectAll(".bin-swatchGroup").classed("is-visible",!0),f.classed("scroll-poc-marketed")){var e=f.select("select");e.selectAll("option").data(["White","BIPOC","All"]).enter().append("option").attr("value",function(t){return t}).text(function(t){return t}).property("selected",function(t){return"White"==t}),e.on("change",function(e){var n=this.value;v(t,n)})}}(n),window.innerWidth,m(),function(t,e){var n=b.get(e).section,r=(0,o.default)();r.setup({container:"."+n,graphic:"."+n+" .scroll-graphic",text:".scroll-text",step:"."+n+" .step",debug:!1}).onStepEnter(function(e,r){return function(t,e,n){var r=e.index,o=d3.select("."+n).select(".scroll-graphic").select("select");"scroll-poc-marketed"===n?(0===r&&(l(n,1),v(t,"White"),o.selectAll("option").property("selected",function(t){return"White"==t})),1===r&&(l(n,1),v(t,"BIPOC"),o.selectAll("option").property("selected",function(t){return"BIPOC"==t}))):l(n,r)}(t,e,n)}),a.push(r)}(n,t)}function g(){var t=d3.select(this).at("data-competitors"),e=this.checked;u.call("switch",null,{comp:t,checked:e})}function y(){var t=d3.select(this);d3.select(this.parentNode).selectAll(".ui-display_button").classed("is-active",!1),t.classed("is-active",!0);var e=t.at("data-competitors"),n=t.at("data-action");u.call("button",null,{comp:e,action:n})}function v(t,e){var n=s.filter(function(t){return 3==t.group||4==t.group||0==t.group}),r=null,o=d3.select(".scroll-poc-marketed"),i=o.selectAll(".is-active"),a=i.at("data-competitors"),c=i.at("data-action"),l=o.select(".toggle input").property("checked");"White"===e&&(r=n.filter(function(t){return 4==t.group||0==t.group})),"BIPOC"===e&&(r=n.filter(function(t){return 3==t.group||0==t.group})),"All"===e&&(r=n),t.data(r).render(),u.call("button",null,{comp:a,action:c}),u.call("switch",null,{comp:a,checked:l})}function m(){var t=Math.floor(.8*window.innerHeight),e=f.select(".scroll-graphic"),n=e.select(".chart"),r=f.select(".scroll-text");r.selectAll(".step").style("height",t+"px");var o=d3.select(".scroll").node().offsetWidth;window.innerWidth>1e3?(e.style("width",o+"px").style("height",window.innerHeight+"px"),r.node().offsetWidth,e.node().offsetWidth,n.style("height",Math.floor(window.innerHeight)+"px")):(e.style("height","auto"),n.style("height","auto")),a.forEach(function(t){return t.resize()})}e.default={init:function(){Promise.all([(0,r.default)()]).then(function(t){s=t[0],d.each(h)}).catch(function(t){return console.log(t)})},resize:function(){var t=window.innerWidth,e=window.innerHeight;t>=1e3&&e>=640?(console.log("we're on a big screen"),m()):console.log("we're on a small screen"),m()}}},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}d3.selection.prototype.headToHead=function(t){var e=this.nodes().map(function(t){var e=d3.select(t),n=e.datum(),o={init:function(){o.resize(),o.render()},resize:function(){return e.node().offsetWidth,e.node().offsetHeight,o},render:function(){var t=d3.nest().key(function(t){return t.brand_short}).key(function(t){return t.lightnessGroup}).entries(n),i=d3.nest().key(function(t){return t.brand_short}).rollup(function(t){return t.length}).entries(n),a=d3.map(i,function(t){return t.key}),s=d3.map(n,function(t){return t.brand_short}),c=[],l=t.map(function(t){var e=t.values;c.push(e);var n=d3.range(0,10).map(function(t){var n=t.toString();return e.find(function(t){return t.key===n})||{key:n,values:[]}});return{key:t.key,values:n}}),u=c[0],d=c[1],p=u.concat(d),f=e.selectAll(".bin-brand").data(l).enter().append("div").attr("class",function(t,e){return"bin-brand bin-brand-"+e}).attr("data-brand",function(t,e){return e}),b=f.selectAll(".bin-brandTGroup").data(function(t){return[t]}).enter().append("div").attr("class",function(t,e){return"bin-brandTGroup bin-brandTGroup"+e});b.append("text").text(function(t){return s.get(t.key).brand}).attr("class","bin-brandTitle"),b.append("text").text(function(t){return s.get(t.key).product}).attr("class","bin-brandProduct"),b.append("text").text(function(t){return a.get(t.key).value+" shades"}).attr("class","bin-brandTotal");var h=f.selectAll(".bin-category").data(function(t){return t.values}).enter().append("div").attr("class",function(t,e){return"bin-category bin-category-"+e}).style("height",function(t,e){return 5*t.values.length+"px"}).style("border-color","rgba(0,0,0,0)"),g=(h.selectAll(".bin-swatchGroup").data(function(t){return[t]}).enter().append("div").attr("class","bin-swatchGroup").selectAll(".bin-swatch").data(function(t){return t.values}).enter().append("div").attr("class",function(t){return"bin-swatch bin-swatch-"+t.L}).style("height","4px").style("width","75px").style("background-color",function(t){return"#"+t.hex}),h.selectAll(".bin-count").data(function(t){return[t]}).enter().append("text").attr("data-value",function(t){return t.values.length}).attr("data-group",function(t){return t.key}).attr("class",function(t,e){var n=p.filter(function(e){return e.key==t.key}).map(function(t){return t.values.length}),o=Math.max.apply(Math,r(n));return 0==t.values.length?"bin-count bin-count-zero":t.values.length==o?"bin-count bin-count-winner":"bin-count"}).attr("data-status",function(t,e){var n=p.filter(function(e){return e.key==t.key}).map(function(t){return t.values.length}),o=Math.max.apply(Math,r(n));return t.values.length==o?"winner":"loser"}).text(function(t){return t.values.length}).style("opacity",0).style("background-color","rgba(0,0,0,0)"),e.selectAll(".bin-vsGroup").data([0]).enter().append("div").attr("class","bin-vsGroup").selectAll(".bin-vsCat").data([0,1,2,3,4,5,6,7,8,9,10]).enter().append("div").attr("class",function(t,e){return"bin-vsCat bin-vsCat-"+t}).style("height",function(t,n){var r=e.select(".bin-brandTGroup").node().offsetHeight;return 0==n?r-2+"px":"0px"}).style("margin","0px").selectAll(".bin-vs").data(function(t){return[t]}).enter().append("text").attr("class",function(t,e){return"bin-vs bin-vs-"+t}).text("vs").attr("alignment-baseline","middle").attr("text-anchor","middle").style("opacity",0).style("border-top","none").style("border-bottom","none"),e.selectAll(".bin-labelGroup").data([0]).enter().append("div").attr("class","bin-labelGroup").style("opacity",0));return g.append("div").attr("class","bin-labelTGroup").selectAll(".bin-labelTitle").data(["Lightness","Range"]).enter().append("text").text(function(t){return t}).attr("class","bin-labelTitle"),g.selectAll(".bin-labelCat").data([0,1,2,3,4,5,6,7,8,9]).enter().append("div").attr("class","bin-labelCat").selectAll(".bin-label").data(function(t){return[t]}).enter().append("text").attr("class","bin-label").text(function(t){return 10*t+" - "+(10*t+10)}).attr("alignment-baseline","middle").attr("text-anchor","middle"),d3.selectAll(".graphic-legend").style("opacity",0),o},data:function(t){return arguments.length?(n=t,e.datum(n),o.render(),o):n},toggle:function(t){var n=e.selectAll(".bin-category"),r=e.selectAll(".bin-swatch"),i=e.selectAll(".bin-labelGroup"),a=e.selectAll(".bin-count"),s=e.selectAll(".bin-vsCat"),c=e.selectAll(".bin-vs"),l=d3.selectAll(".graphic-legend"),u=e.selectAll(".bin-category-2, .bin-vsCat-3, .bin-category-3, .bin-vsCat-4, .bin-category-5, .bin-vsCat-6, .bin-category-9, .bin-vsCat-10"),d=e.selectAll(".bin-category-6, .bin-vsCat-7, .bin-category-7, .bin-vsCat-8, .bin-category-8, .bin-vsCat-9");return 0==t&&(console.log("step 0 fired"),n.classed("spread",!1).transition().duration(500).ease(d3.easeCubicInOut).style("height",function(t,e){return 5*t.values.length+"px"}).style("margin","0px").style("border-color","rgba(0,0,0,0)"),r.transition().duration(500).ease(d3.easeCubicInOut).style("height","4px"),i.style("opacity",0),a.transition().duration(0).style("opacity",0).style("background-color","rgba(0,0,0,0)"),s.style("border-color","rgba(0,0,0,0)").transition().duration(500).ease(d3.easeCubicInOut).style("height",function(t,n){var r=e.select(".bin-brandTGroup").node().offsetHeight;return 0==n?r-2+"px":"0px"}).style("margin","0px").style("border-top","none").style("border-bottom","none"),c.transition().duration(0).style("opacity",0),l.style("opacity",0),u.style("background-color","rgba(0, 0, 0, 0)"),d.style("background-color","rgba(0, 0, 0, 0)")),1==t&&(n.classed("spread",!0).transition().duration(500).ease(d3.easeCubicInOut).style("height","42px").style("margin","2px 0").style("border-color","#c9c9c9"),r.transition().duration(500).ease(d3.easeCubicInOut).style("height","2px"),i.transition().duration(500).ease(d3.easeCubicInOut).style("opacity",1),a.transition().duration(0).style("opacity",0).style("background-color","rgba(0,0,0,0)"),s.transition().duration(500).ease(d3.easeCubicInOut).style("height",function(t,n){var r=e.select(".bin-brandTGroup").node().offsetHeight;return 0==n?r-2+"px":"42px"}).style("margin","2px 0").style("border-top","1px solid #c9c9c9").style("border-bottom","1px solid #c9c9c9"),c.transition().duration(0).style("opacity",0),l.style("opacity",0),u.style("background-color","rgba(0, 0, 0, 0)"),d.style("background-color","rgba(0, 0, 0, 0)")),2==t&&(n.classed("spread",!0).style("height","42px").style("margin","2px 0").style("border-color","#c9c9c9"),r.style("height","2px"),i.style("opacity",1),a.transition().duration(500).delay(function(t,e){return e>10?100*(e-10):100*e}).ease(d3.easeCubicInOut).style("opacity",1).transition().duration(500).delay(250).style("background-color",function(t,e,n){return d3.select(n[e]).classed("bin-count-winner")?"#FCCB31":"rgba(0,0,0,0)"}),s.style("height",function(t,n){var r=e.select(".bin-brandTGroup").node().offsetHeight;return 0==n?r-2+"px":"42px"}).style("margin","2px 0").style("border-top","1px solid #c9c9c9").style("border-bottom","1px solid #c9c9c9"),c.transition().duration(500).delay(function(t,e){return 100*e}).ease(d3.easeCubicInOut).style("opacity",1),l.transition().duration(500).ease(d3.easeCubicInOut).style("opacity",1),u.transition().duration(500).ease(d3.easeCubicInOut).style("background-color","rgba(0, 0, 0, 0)"),d.style("background-color","rgba(0, 0, 0, 0)")),3==t&&(n.classed("spread",!0).style("height","42px").style("margin","2px 0").style("border-color","#c9c9c9"),r.style("height","2px"),i.style("opacity",1),a.transition().duration(500).delay(function(t,e){return e>10?100*(e-10):100*e}).ease(d3.easeCubicInOut).style("opacity",1).transition().duration(500).delay(250).style("background-color",function(t,e,n){return d3.select(n[e]).classed("bin-count-winner")?"#FCCB31":"rgba(0,0,0,0)"}),s.style("height",function(t,n){var r=e.select(".bin-brandTGroup").node().offsetHeight;return 0==n?r-2+"px":"42px"}).style("border-top","1px solid #c9c9c9").style("border-bottom","1px solid #c9c9c9").style("margin","2px 0"),c.transition().duration(500).delay(function(t,e){return 100*e}).ease(d3.easeCubicInOut).style("opacity",1),l.transition().duration(500).ease(d3.easeCubicInOut).style("opacity",1),u.transition().duration(500).ease(d3.easeCubicInOut).style("background-color","rgba(252, 203, 49, 0.2)"),d.transition().duration(500).ease(d3.easeCubicInOut).style("background-color","rgba(0, 0, 0, 0)")),4==t&&(n.classed("spread",!0).style("height","42px").style("margin","2px 0").style("border-color","#c9c9c9"),r.style("height","2px"),i.style("opacity",1),a.transition().duration(500).delay(function(t,e){return e>10?100*(e-10):100*e}).ease(d3.easeCubicInOut).style("opacity",1).transition().duration(500).delay(250).style("background-color",function(t,e,n){return d3.select(n[e]).classed("bin-count-winner")?"#FCCB31":"rgba(0,0,0,0)"}),s.style("height",function(t,n){var r=e.select(".bin-brandTGroup").node().offsetHeight;return 0==n?r-2+"px":"42px"}).style("border-top","1px solid #c9c9c9").style("border-bottom","1px solid #c9c9c9").style("margin","2px 0"),c.transition().duration(500).delay(function(t,e){return 100*e}).ease(d3.easeCubicInOut).style("opacity",1),l.transition().duration(500).ease(d3.easeCubicInOut).style("opacity",1),u.transition().duration(500).ease(d3.easeCubicInOut).style("background-color","rgba(0, 0, 0, 0)"),d.transition().duration(500).ease(d3.easeCubicInOut).style("background-color","rgba(252, 203, 49, 0.2)")),o}};return o.init(),o});return e.length>1?e:e.pop()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(0));n(8);var o=i(n(2));function i(t){return t&&t.__esModule?t:{default:t}}i(n(1)),i(n(3));var a=(0,o.default)(),s=null,c=null,l=d3.selectAll(".h2h"),u=d3.selectAll(".scroll-part1"),d=u.select(".scroll-graphic"),p=d.select(".chart"),f=u.select(".scroll-text"),b=f.selectAll(".step");function h(){var t=d3.select(this),e=t.at("data-comp1"),n=t.at("data-comp2"),r=s.filter(function(t){return t.brand_short==e||t.brand_short==n}),o=t.datum(r).headToHead();c=o.toggle,g(),a.setup({container:".scroll",graphic:".scroll-graphic",text:".scroll-text",step:".step",debug:!1}).onStepEnter(y)}function g(){var t=window.innerWidth,e=1==!(t<1e3)?Math.floor(.8*window.innerHeight):Math.floor(window.innerHeight);Math.floor(window.innerHeight),b.style("height",e+"px");var n=u.node().offsetWidth;d.style("width",n+"px").style("height",window.innerHeight+"px"),f.node().offsetWidth;var r=t<1e3?n:d.node().offsetWidth;p.style("width",r+"px").style("height",Math.floor(window.innerHeight)+"px"),a.resize()}function y(t){var e=t.index;c(e)}e.default={init:function(){Promise.all([(0,r.default)()]).then(function(t){s=t[0],l.each(h)}).catch(function(t){return console.log(t)})},resize:function(){p.resize(),g()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={init:function(){console.log("Make something awesome!")},resize:function(){}}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){(function(e){var n=NaN,r="[object Symbol]",o=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt,l="object"==typeof e&&e&&e.Object===Object&&e,u="object"==typeof self&&self&&self.Object===Object&&self,d=l||u||Function("return this")(),p=Object.prototype.toString,f=Math.max,b=Math.min,h=function(){return d.Date.now()};function g(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function y(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&p.call(t)==r}(t))return n;if(g(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=g(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var l=a.test(t);return l||s.test(t)?c(t.slice(2),l?2:8):i.test(t)?n:+t}t.exports=function(t,e,n){var r,o,i,a,s,c,l=0,u=!1,d=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function v(e){var n=r,i=o;return r=o=void 0,l=e,a=t.apply(i,n)}function m(t){var n=t-c;return void 0===c||n>=e||n<0||d&&t-l>=i}function x(){var t=h();if(m(t))return w(t);s=setTimeout(x,function(t){var n=e-(t-c);return d?b(n,i-(t-l)):n}(t))}function w(t){return s=void 0,p&&r?v(t):(r=o=void 0,a)}function _(){var t=h(),n=m(t);if(r=arguments,o=this,c=t,n){if(void 0===s)return function(t){return l=t,s=setTimeout(x,e),u?v(t):a}(c);if(d)return s=setTimeout(x,e),v(c)}return void 0===s&&(s=setTimeout(x,e)),a}return e=y(e)||0,g(n)&&(u=!!n.leading,i=(d="maxWait"in n)?f(y(n.maxWait)||0,e):i,p="trailing"in n?!!n.trailing:p),_.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=o=s=void 0},_.flush=function(){return void 0===s?a:w(h())},_}}).call(this,n(11))},function(t,e,n){"use strict";var r=l(n(12)),o=l(n(3)),i=(l(n(0)),l(n(10))),a=l(n(9)),s=l(n(7)),c=l(n(5));function l(t){return t&&t.__esModule?t:{default:t}}var u=d3.select("body"),d=0,p=window.innerHeight;u.classed("is-mobile",o.default.any()),window.addEventListener("resize",(0,r.default)(function(){var t=u.node().offsetWidth,e=window.innerHeight;(d!==t||e<p)&&(d=t,i.default.resize(),s.default.resize()),s.default.resize()},150)),i.default.init(),a.default.init(),s.default.init(),c.default.init()}]);